//
// Cookbook Name:: chef
//
// Copyright RightScale, Inc. All rights reserved.
// All access and use subject to the RightScale Terms of Service available at
// http://www.rightscale.com/terms.php and, if applicable, other agreements
// such as a RightScale Master Subscription Agreement.
//
// Managed by RightScale
// DO NOT EDIT BY HAND
//
{
  "name": "<%= @node_name %>",
  "normal": {
    "company": "<%= @company %>",
    "tags": [
    ]
  },
  "chef_environment": "<%= @environment %>",
<%# Prepares comma separated list of roles %>
<% array_list = "" -%>
<% if @role != "" -%>
  <% roles_list = @role.delete(' ') -%>
  <% roles_list = roles_list.split(',') -%>
  <% roles_list.each do |roles| %>
    <% array_list += "\"" + "role[#{roles}]" + "\"" + ", " %>
  <% end %>
<% end %>
  "run_list": [<%= array_list.sub(/.{2}$/,'') %>]
}
